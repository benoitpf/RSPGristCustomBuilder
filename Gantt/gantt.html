<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>onRecord</title>
    <script type="text/javascript"
            src="https://unpkg.com/vis-timeline@latest/standalone/umd/vis-timeline-graph2d.min.js"></script>
    <link href="https://unpkg.com/vis-timeline@latest/styles/vis-timeline-graph2d.min.css" rel="stylesheet"
          type="text/css"/>
    <style>#visualization {
        width: 100%;
        height: 100%;
        border: 1px solid lightgray;
    }</style>
    <script src="https://docs.getgrist.com/grist-plugin-api.js"></script>
</head>
<body>
    <div id="visualization"></div>
    <script>
        grist.ready({requiredAccess: 'full'});

        // DOM element where the Timeline will be attached
        var container = document.getElementById("visualization");


        // Create a DataSet (allows two way data-binding)
        var items = new vis.DataSet(
        //     {id: 1, content: "item 1", start: "2025-04-20"},
        //     {id: 2, content: "item 2", start: "2025-04-14"},
        //     {id: 3, content: "item 3", start: "2025-04-18"},
        //     {id: 4, content: "item 4", start: "2025-04-16", end: "2025-04-19"},
        //     {id: 5, content: "item 5", start: "2025-04-25"},
        //     {id: 6, content: "item 6", start: "2025-04-27", type: "point"},
        );

        // Configuration for the Timeline
        var options = {};

        // Create a Timeline
        var timeline = new vis.Timeline(container, items, options);

        grist.onRecord(record => {

            console.info("###############");
            console.info(record);
        });

        grist.onRecords(table => {
            // Code qui sera executé lorsque les données dans la table ont changé.
            items.update(table);
            // adjust the timeline window such that we see the loaded data
            timeline.fit();
        });


        </script>
    </body>
</html>
